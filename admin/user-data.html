﻿
<head>
    <!--Start Style -->
    <link rel="stylesheet" type="text/css" href="assets/css/datatables.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">
    <!--Custom Style -->
    <link rel="stylesheet" type="text/css" href="assets/css/style.min.css">
    <script src="static/js/html5shiv.min.js"></script>
    <script src="static/js/respond.min.js"></script>

    <style>
        body .demo-class .layui-layer-btn0 {
            border-color: #E6E3E6;
            background-color: #FFF;
            color: black;
        }

        body .demo-class .layui-layer-btn1 {
            border-color: #4898d5;
            background-color: #2e8ded;
            color: #fff;
        }

        body .table-responsive {
            overflow-x: visible;
        }

        body .label-info {
            background-color: #11a1fd;
        }

        .zindex100 {
            z-index: 100 !important;
        }

        .ad-btn1 {
            min-width: 170px;
            padding: 0 15px;
            height: 50px;
            line-height: 52px;
            display: inline-block;
            text-align: center;
            color: var(--main-white);
            background: var(--main-color);
            text-transform: capitalize;
            font-weight: 500;
            position: relative;
            overflow: hidden;
            border: 0;
            border-radius: 5px;
            color: white;
        }
    </style>
</head>

<body>
<div class="loader">
    <div class="spinner">
        <img src="assets/images/loader.gif" alt=""/>
    </div>
</div>
<div class="row">
    <div class="colxl-12 col-lg-12 col-md-12 col-sm-12 col-12">
        <div class="page-title-wrapper">
            <div class="page-title-box ad-title-box-use">
                &nbsp;&nbsp;<svg t="1683262992131" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                 xmlns="http://www.w3.org/2000/svg" p-id="2685" width="16" height="16">
                <path d="M911.194 151.785v539.172L730.253 845.451h-589.66V151.785h770.601zM679.765 614.021H255.706v76.936h424.059v-76.936zM795.479 460.15H255.706v76.936h539.773V460.15z m0-154.494H255.706v77.559h539.773v-77.559z m0 0"
                      fill="#595A5A" p-id="2686"></path>
            </svg>
                <a href="https://docs.qq.com/doc/p/a6a9d6ee4387623c9ec68dfed1dd9ad98ebf0cf0?dver=2.1.27413708"
                   style="text-decoration: underline;" target="_blank">使用说明</a>
            </div>
            <div class="ad-breadcrumb">
                <ul>
                    <li>
                        <div class="ad-user-btn">
                            <input class="form-control" type="text" placeholder="请输入关键字" id="search">
                            <a class="search-link" onclick="searchPage()" href="javascript:void(0);">
                                <svg xmlns="http://www.w3.org/2000/svg" class="" width="20" fill="none"
                                     viewbox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                          stroke-width="2"
                                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                                </svg>
                            </a>
                        </div>
                    </li>
                    <li>
                        <div class="add-group">
                            <button type="button" class="form-control ad-btn1 btn-primary" onclick="add()">
                                <svg t="1682693748657" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" p-id="2766" width="16" height="16">
                                    <path d="M102.4 558.353067h819.2a51.2 51.2 0 1 0 0-102.4H102.4a51.2 51.2 0 0 0 0 102.4z"
                                          fill="#ffffff" p-id="2767"></path>
                                    <path d="M460.8 916.753067v-819.2a51.2 51.2 0 1 1 102.4 0v819.2a51.2 51.2 0 0 1-102.4 0z"
                                          fill="#ffffff" p-id="2768"></path>
                                </svg>
                                新建实例
                            </button>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <!-- Styled Table Card-->
    <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
        <div class="card table-card">
            <div class="card-body">
                <table id="example" class="table table-striped table-bordered dt-responsive nowrap"
                       style="width:100%">
                    <thead>
                    <tr>
                        <th>代理地址</th>
                        <th>本地端口</th>
                        <th>所属机房</th>
                        <th>到期时间</th>
                        <th>套餐流量</th>
                        <th>运行状态</th>
                        <th>在线状态</th>
                        <th>Docker参数</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- 创建实例 -->
<div id="createOrderLayer" style="display: none;">
    <form id="createOrderForm">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"><br/>
            <div class="form-group has-feedback edit-engine-select1">
                <label for="partitionId">机房选择
                    <svg id="partitionTips" style="padding-bottom: 4px;" t="1683273415215" class="icon"
                         viewBox="0 0 1024 1024" version="1.1"
                         xmlns="http://www.w3.org/2000/svg" p-id="5141" width="16" height="16">
                        <path d="M512.007314 0a512 512 0 0 0-512 512 503.222857 503.222857 0 0 0 98.742857 302.08l-6.582857 146.285714a57.782857 57.782857 0 0 0 57.782857 59.977143H512.007314A512 512 0 0 0 512.007314 0z m0 950.857143H166.0416l5.851429-133.851429v-26.331428l-16.091429-21.211429A430.08 430.08 0 0 1 73.150171 512a438.857143 438.857143 0 1 1 438.857143 438.857143z"
                              p-id="5142" fill="#11a1fd"></path>
                        <path d="M460.075886 691.2h107.52V804.571429H460.075886zM506.155886 219.428571a172.617143 172.617143 0 0 0-118.491429 41.691429 183.588571 183.588571 0 0 0-58.514286 146.285714h103.862858a117.028571 117.028571 0 0 1 25.6-73.142857A73.142857 73.142857 0 0 1 512.007314 314.514286a73.142857 73.142857 0 0 1 48.274286 16.091428 79.725714 79.725714 0 0 1 24.868571 63.634286 99.474286 99.474286 0 0 1-46.08 79.725714 190.171429 190.171429 0 0 0-62.902857 73.142857 247.954286 247.954286 0 0 0-11.702857 90.697143h96.548572a141.165714 141.165714 0 0 1 10.971428-62.171428 112.64 112.64 0 0 1 33.645714-35.84 331.337143 331.337143 0 0 0 66.56-65.828572 146.285714 146.285714 0 0 0 22.674286-83.382857 157.257143 157.257143 0 0 0-49.005714-123.611428A198.217143 198.217143 0 0 0 506.155886 219.428571z"
                              p-id="5143" fill="#11a1fd"></path>
                    </svg>
                </label>
                <div class="input-group" style="width: 100%;">
                    <select style="width: 100%;" name="partitionId" class="form-control form-engine-select">
                    </select>
                </div>
            </div>
            <div class="form-group has-feedback edit-instance-select1">
                <label for="tunnelType">实例类型
                    <svg id="tunnelTips" style="padding-bottom: 4px;" t="1683273415215" class="icon"
                         viewBox="0 0 1024 1024" version="1.1"
                         xmlns="http://www.w3.org/2000/svg" p-id="5141" width="16" height="16">
                        <path d="M512.007314 0a512 512 0 0 0-512 512 503.222857 503.222857 0 0 0 98.742857 302.08l-6.582857 146.285714a57.782857 57.782857 0 0 0 57.782857 59.977143H512.007314A512 512 0 0 0 512.007314 0z m0 950.857143H166.0416l5.851429-133.851429v-26.331428l-16.091429-21.211429A430.08 430.08 0 0 1 73.150171 512a438.857143 438.857143 0 1 1 438.857143 438.857143z"
                              p-id="5142" fill="#11a1fd"></path>
                        <path d="M460.075886 691.2h107.52V804.571429H460.075886zM506.155886 219.428571a172.617143 172.617143 0 0 0-118.491429 41.691429 183.588571 183.588571 0 0 0-58.514286 146.285714h103.862858a117.028571 117.028571 0 0 1 25.6-73.142857A73.142857 73.142857 0 0 1 512.007314 314.514286a73.142857 73.142857 0 0 1 48.274286 16.091428 79.725714 79.725714 0 0 1 24.868571 63.634286 99.474286 99.474286 0 0 1-46.08 79.725714 190.171429 190.171429 0 0 0-62.902857 73.142857 247.954286 247.954286 0 0 0-11.702857 90.697143h96.548572a141.165714 141.165714 0 0 1 10.971428-62.171428 112.64 112.64 0 0 1 33.645714-35.84 331.337143 331.337143 0 0 0 66.56-65.828572 146.285714 146.285714 0 0 0 22.674286-83.382857 157.257143 157.257143 0 0 0-49.005714-123.611428A198.217143 198.217143 0 0 0 506.155886 219.428571z"
                              p-id="5143" fill="#11a1fd"></path>
                    </svg>
                </label>
                <div class="input-group" style="width: 100%;">
                    <select style="width: 100%;" name="tunnelType" class="form-control form-select-create">
                        <option value="3">域名</option>
                        <option value="1">TCP</option>
                        <option value="4">SOCKS5</option>
                    </select>
                </div>
            </div>
            <div class="form-group has-feedback">
                <label for="mealId">套餐选择</label>
                <div class="input-group" style="width: 100%;">
                    <select style="width: 100%;" name="mealId" class="form-control meal-select">
                        <!-- <option>1</option> -->
                    </select>
                </div>
            </div>
            <div class="form-group has-feedback host-input host-input1" style="display: none;">
                <label for="host">域名
                    <svg id="hostTips" style="padding-bottom: 4px;" t="1683273415215" class="icon"
                         viewBox="0 0 1024 1024" version="1.1"
                         xmlns="http://www.w3.org/2000/svg" p-id="5141" width="16" height="16">
                        <path d="M512.007314 0a512 512 0 0 0-512 512 503.222857 503.222857 0 0 0 98.742857 302.08l-6.582857 146.285714a57.782857 57.782857 0 0 0 57.782857 59.977143H512.007314A512 512 0 0 0 512.007314 0z m0 950.857143H166.0416l5.851429-133.851429v-26.331428l-16.091429-21.211429A430.08 430.08 0 0 1 73.150171 512a438.857143 438.857143 0 1 1 438.857143 438.857143z"
                              p-id="5142" fill="#11a1fd"></path>
                        <path d="M460.075886 691.2h107.52V804.571429H460.075886zM506.155886 219.428571a172.617143 172.617143 0 0 0-118.491429 41.691429 183.588571 183.588571 0 0 0-58.514286 146.285714h103.862858a117.028571 117.028571 0 0 1 25.6-73.142857A73.142857 73.142857 0 0 1 512.007314 314.514286a73.142857 73.142857 0 0 1 48.274286 16.091428 79.725714 79.725714 0 0 1 24.868571 63.634286 99.474286 99.474286 0 0 1-46.08 79.725714 190.171429 190.171429 0 0 0-62.902857 73.142857 247.954286 247.954286 0 0 0-11.702857 90.697143h96.548572a141.165714 141.165714 0 0 1 10.971428-62.171428 112.64 112.64 0 0 1 33.645714-35.84 331.337143 331.337143 0 0 0 66.56-65.828572 146.285714 146.285714 0 0 0 22.674286-83.382857 157.257143 157.257143 0 0 0-49.005714-123.611428A198.217143 198.217143 0 0 0 506.155886 219.428571z"
                              p-id="5143" fill="#11a1fd"></path>
                    </svg>
                </label>
                <span class="btn-group" style="margin-left: 10px;height: 20px;">
                                <label class="radio-inline">
                                    <input checked style="height: auto;" type="radio" name="ymRadioOptions"
                                           id="inlineRadio2" value="system">
                                    系统赠送
                                </label>
                    &nbsp;&nbsp;
                                <label id="isCustom" class="radio-inline">
                                    <input style="height: auto;" type="radio" name="ymRadioOptions" id="inlineRadio1"
                                           value="myself"> 我有域名
                                </label>
                            </span>
                <div class="input-group ym-system-input"
                     style="width: 100%;display: flex;align-items: center;">
                    <input id="targetEditHost" name="host" class="form-control"
                           placeholder="例: www ,域名前缀仅支持小写字母和数字" type="text">
                    <div style="display: inline-block;width: 120px;" class="info">.
                        <img style="width: 40px;height: 16px;"
                             src="static/image/msk.png"/>
                        .com
                    </div>
                </div>
                <div class="input-group ym-my-input"
                     style="width: 100%;display: flex;align-items: center;display: none;">
                    <input id="targetSelfEditHost" name="myHost" class="form-control"
                           placeholder="例: www.npsvip.com ,自定义域名需按机房要求备案或选择香港机房"
                           type="text">
                </div>
            </div>
            <div class="form-group has-feedback port-input port-input1">
                <label for="targetIpPort">内网服务
                    <svg id="targetIpPortTips" style="padding-bottom: 4px;" t="1683273415215" class="icon"
                         viewBox="0 0 1024 1024" version="1.1"
                         xmlns="http://www.w3.org/2000/svg" p-id="5141" width="16" height="16">
                        <path d="M512.007314 0a512 512 0 0 0-512 512 503.222857 503.222857 0 0 0 98.742857 302.08l-6.582857 146.285714a57.782857 57.782857 0 0 0 57.782857 59.977143H512.007314A512 512 0 0 0 512.007314 0z m0 950.857143H166.0416l5.851429-133.851429v-26.331428l-16.091429-21.211429A430.08 430.08 0 0 1 73.150171 512a438.857143 438.857143 0 1 1 438.857143 438.857143z"
                              p-id="5142" fill="#11a1fd"></path>
                        <path d="M460.075886 691.2h107.52V804.571429H460.075886zM506.155886 219.428571a172.617143 172.617143 0 0 0-118.491429 41.691429 183.588571 183.588571 0 0 0-58.514286 146.285714h103.862858a117.028571 117.028571 0 0 1 25.6-73.142857A73.142857 73.142857 0 0 1 512.007314 314.514286a73.142857 73.142857 0 0 1 48.274286 16.091428 79.725714 79.725714 0 0 1 24.868571 63.634286 99.474286 99.474286 0 0 1-46.08 79.725714 190.171429 190.171429 0 0 0-62.902857 73.142857 247.954286 247.954286 0 0 0-11.702857 90.697143h96.548572a141.165714 141.165714 0 0 1 10.971428-62.171428 112.64 112.64 0 0 1 33.645714-35.84 331.337143 331.337143 0 0 0 66.56-65.828572 146.285714 146.285714 0 0 0 22.674286-83.382857 157.257143 157.257143 0 0 0-49.005714-123.611428A198.217143 198.217143 0 0 0 506.155886 219.428571z"
                              p-id="5143" fill="#11a1fd"></path>
                    </svg>
                </label>
                <div class="input-group" style="width: 100%;">
                    <input id="targetIpPort" name="targetIpPort" class="form-control" value="127.0.0.1:80"
                           placeholder="例: 10.123.21.233:8080 ,本机可直接填写端口,端口必填,支持后期随意编辑" type="text">
                </div>
            </div>
            <div id="coupon" class="form-group has-feedback">
                <label for="prizeRecordId">优惠</label>
                <select style="width: 100%;" name="prizeRecordId" class="form-control coupon-select">
                    <!-- <option>1</option> -->
                </select>
            </div>
            <div id="pay" class="form-group has-feedback">
                <label for="payType">支付方式</label>
                <div class="input-group" style="width: 100%;">
                        <span class="btn-group" style="margin-left: 20px;">
                                <label title="支付宝" class="radio-inline">
                                    <input checked type="radio" name="payType" value="2">
                                   <svg t="1625817310203" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="11153" width="64" height="64"><path
                                           d="M902.095 652.871l-250.96-84.392s19.287-28.87 39.874-85.472c20.59-56.606 23.539-87.689 23.539-87.689l-162.454-1.339v-55.487l196.739-1.387v-39.227H552.055v-89.29h-96.358v89.294H272.133v39.227l183.564-1.304v59.513h-147.24v31.079h303.064s-3.337 25.223-14.955 56.606c-11.615 31.38-23.58 58.862-23.58 58.862s-142.3-49.804-217.285-49.804c-74.985 0-166.182 30.123-175.024 117.55-8.8 87.383 42.481 134.716 114.728 152.139 72.256 17.513 138.962-0.173 197.04-28.607 58.087-28.391 115.081-92.933 115.081-92.933l292.486 142.041c-11.932 69.3-72.067 119.914-142.387 119.844H266.37c-79.714 0.078-144.392-64.483-144.466-144.194V266.374c-0.074-79.72 64.493-144.399 144.205-144.47h491.519c79.714-0.073 144.396 64.49 144.466 144.203v386.764z m-365.76-48.895s-91.302 115.262-198.879 115.262c-107.623 0-130.218-54.767-130.218-94.155 0-39.34 22.373-82.144 113.943-88.333 91.519-6.18 215.2 67.226 215.2 67.226h-0.047z"
                                           fill="#02A9F1" p-id="11154"></path></svg>
                                </label>
                                <label title="微信" class="radio-inline">
                                    <input type="radio" name="payType" value="1">
                                <svg t="1625817180424" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" p-id="9001" width="64" height="64"><path
                                        d="M683.058 364.695c11 0 22 1.016 32.943 1.976C686.564 230.064 538.896 128 370.681 128c-188.104 0.66-342.237 127.793-342.237 289.226 0 93.068 51.379 169.827 136.725 229.256L130.72 748.43l119.796-59.368c42.918 8.395 77.37 16.79 119.742 16.79 11 0 21.46-0.48 31.914-1.442a259.168 259.168 0 0 1-10.455-71.358c0.485-148.002 128.744-268.297 291.403-268.297l-0.06-0.06z m-184.113-91.992c25.99 0 42.913 16.79 42.913 42.575 0 25.188-16.923 42.579-42.913 42.579-25.45 0-51.38-16.85-51.38-42.58 0-25.784 25.93-42.574 51.38-42.574z m-239.544 85.154c-25.384 0-51.374-16.85-51.374-42.58 0-25.784 25.99-42.574 51.374-42.574 25.45 0 42.918 16.79 42.918 42.575 0 25.188-16.924 42.579-42.918 42.579z m736.155 271.655c0-135.647-136.725-246.527-290.983-246.527-162.655 0-290.918 110.88-290.918 246.527 0 136.128 128.263 246.587 290.918 246.587 33.972 0 68.423-8.395 102.818-16.85l93.809 50.973-25.93-84.677c68.907-51.93 120.286-119.815 120.286-196.033z m-385.275-42.58c-16.923 0-34.452-16.79-34.452-34.179 0-16.79 17.529-34.18 34.452-34.18 25.99 0 42.918 16.85 42.918 34.18 0 17.39-16.928 34.18-42.918 34.18z m188.165 0c-16.984 0-33.972-16.79-33.972-34.179 0-16.79 16.927-34.18 33.972-34.18 25.93 0 42.913 16.85 42.913 34.18 0 17.39-16.983 34.18-42.913 34.18z"
                                        fill="#09BB07" p-id="9002"></path></svg>
                                </label>
                                <label title="账户余额" class="radio-inline">
                                    <input type="radio" name="payType" value="3">
                               <svg t="1664258859967" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="10733" width="64" height="64"><path
                                       d="M921.6 518.6624a77.824 77.824 0 0 0-6.4-0.2624h-153.6c-42.4128 0-76.8 34.3872-76.8 76.8s34.3872 76.8 76.8 76.8h153.6c2.1568 0 4.288-0.0896 6.4-0.2624V800c0 42.4128-34.3872 76.8-76.8 76.8H179.2c-42.4128 0-76.8-34.3872-76.8-76.8V390.4c0-42.4128 34.3872-76.8 76.8-76.8h665.6c42.4128 0 76.8 34.3872 76.8 76.8v128.2624zM861.5168 275.2H216.5248a76.9792 76.9792 0 0 1 25.9648-12.3776l500.3008-132.224c40.9344-10.816 83.008 13.1392 93.984 53.5168L861.5168 275.2zM761.6 544h134.4a25.6 25.6 0 0 1 25.6 25.6v51.2a25.6 25.6 0 0 1-25.6 25.6h-134.4a51.2 51.2 0 1 1 0-102.4z m6.4 83.2a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"
                                       fill="#59AAFF" p-id="10734"></path></svg>
                                </label>
                            </span>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- 编辑实例 -->
<div id="editLayer" style="display: none;">
    <form action="" id="editForm">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"><br/>
            <div class="form-group has-feedback edit-instance-select2">
                <label for="tunnelType">实例类型</label>
                <div class="input-group" style="width: 100%;">
                    <select style="width: 100%;" name="tunnelType" class="form-control form-select-edit">
                        <option value="3">域名</option>
                        <option value="1">TCP</option>
                        <option value="4">SOCKS5</option>
                    </select>
                </div>
            </div>
            <label id="hostLabel" for="host">域名</label>
            <div class="form-group has-feedback ym-edit-system-input"
                 style="display: flex;align-items: center;">
                <input id="targetEditSysHost" name="host" class="form-control"
                       placeholder="例: www ,域名前缀仅支持小写字母和数字" type="text">
                <div style="display: inline-block;width: 120px;" class="info">.
                    <img style="width: 40px;height: 16px;"
                         src="static/image/msk.png"/>
                    .com
                </div>
            </div>
            <div class="form-group has-feedback ym-edit-my-input"
                 style="display: flex;align-items: center;display: none;">
                <input id="targetEditSelfHost" name="myHost" class="form-control"
                       placeholder="例: www.npsvip.com ,未阿里云备案域名请选择香港机房"
                       type="text">
            </div>
            <div class="form-group has-feedback port-input">
                <label for="targetIpPort">内网服务</label>
                <div class="input-group" style="width: 100%;">
                    <input id="targetEditIpPort" name="targetIpPort" class="form-control"
                           placeholder="例如：10.123.21.233:80" type="text">
                </div>
            </div>

            <div class="form-group has-feedback edit-instance-select3">
                <label for="partitionMarge">合并客户端</label>
                <span class="glyphicon glyphicon-question-sign" style="color: #f7792e;"
                      data-toggle="tooltip5" data-placement="right"></span>
                <div class="input-group" style="width: 100%;">
                    <select style="width: 100%;" name="partitionMarge"
                            class="form-control form-select-edit partitionMarge">
                    </select>
                </div>
            </div>

            <div class="form-group has-feedback port-remark">
                <label for="remarks">备注</label>
                <div class="input-group" style="width: 100%;">
                    <input id="targetEditRemarks" name="remarks" class="form-control" placeholder="请输入备注"
                           type="text">
                </div>
            </div>
        </div>
    </form>
</div>

<!-- 安全密码 -->
<div id="passWordLayer" style="display: none;">
    <form action="" id="passWordForm">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"><br/>
            <p>⚠️ 密码并非绑定实例而是客户端，仅支持HTTP和SOCKS5的实例</p>
            <div class="form-group has-feedback">
                <label for="userName">账户</label>
                <div class="input-group" style="width: 100%;">
                    <input id="userName" name="userName" class="form-control"
                           placeholder="例：admin" type="text">
                </div>
            </div>
            <div class="form-group has-feedback">
                <label for="passWord">密码</label>
                <div class="input-group" style="width: 100%;">
                    <input id="passWord" name="passWord" class="form-control"
                           placeholder="例：123456" type="text">
                </div>
            </div>
        </div>
    </form>
</div>

<!-- 域名证书 -->
<div id="sslLayer" style="display: none;">
    <form action="" id="sslForm">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"><br/>
            <p>HTTPS证书可通过您的域名购买平台申请，也可前往 <a href="https://www.zwapi.cn" target="_blank"
                                            style="text-decoration:underline;">下载证书</a> ，配置后若未生效，请联系网站底部管理员</p><br/>
            <div class="form-group has-feedback">
                <label for="certificate">证书</label>
                <textarea name="certificate" id="certificate" style="width: 550px;height: 200px;"
                          onblur="checkSsl()"
                          placeholder="粘贴PEM格式的证书链（服务器证书+中间证书）。证书通常为“.pem”，“.crt”或“.cer”文件，也可直接拖拽证书文件上传"></textarea>
            </div>
            <div class="form-group has-feedback">
                <label for="key">私钥</label>
                <textarea name="key" id="key" style="width: 550px;height: 200px;"
                          placeholder="粘贴PEM格式的私钥。私钥通常为“.pem”或“.key”文件，也可直接拖拽证书文件上传"></textarea>
            </div>
        </div>
    </form>
</div>

<!-- 流量充值 -->
<div id="flowLayer" style="display: none;">
    <form action="" id="flowForm">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"><br/>
            <div class="form-group has-feedback">
                <label for="mealId">套餐选择</label>
                <div class="input-group" style="width: 100%;">
                    <select style="width: 100%;" name="mealId" class="form-control flow-meal-select">
                        <!-- <option>1</option> -->
                    </select>
                </div>
            </div>

            <div class="form-group has-feedback">
                <label for="payType">支付方式</label>
                <div class="input-group" style="width: 100%;">
                        <span class="btn-group" style="margin-left: 20px;">
                                <label title="支付宝" class="radio-inline">
                                    <input checked type="radio" name="payType" value="2">
                                   <svg t="1625817310203" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                        xmlns="http://www.w3.org/2000/svg" p-id="11153" width="64" height="64"><path
                                           d="M902.095 652.871l-250.96-84.392s19.287-28.87 39.874-85.472c20.59-56.606 23.539-87.689 23.539-87.689l-162.454-1.339v-55.487l196.739-1.387v-39.227H552.055v-89.29h-96.358v89.294H272.133v39.227l183.564-1.304v59.513h-147.24v31.079h303.064s-3.337 25.223-14.955 56.606c-11.615 31.38-23.58 58.862-23.58 58.862s-142.3-49.804-217.285-49.804c-74.985 0-166.182 30.123-175.024 117.55-8.8 87.383 42.481 134.716 114.728 152.139 72.256 17.513 138.962-0.173 197.04-28.607 58.087-28.391 115.081-92.933 115.081-92.933l292.486 142.041c-11.932 69.3-72.067 119.914-142.387 119.844H266.37c-79.714 0.078-144.392-64.483-144.466-144.194V266.374c-0.074-79.72 64.493-144.399 144.205-144.47h491.519c79.714-0.073 144.396 64.49 144.466 144.203v386.764z m-365.76-48.895s-91.302 115.262-198.879 115.262c-107.623 0-130.218-54.767-130.218-94.155 0-39.34 22.373-82.144 113.943-88.333 91.519-6.18 215.2 67.226 215.2 67.226h-0.047z"
                                           fill="#02A9F1" p-id="11154"></path></svg>
                                </label>
                                <label title="微信" class="radio-inline">
                                    <input type="radio" name="payType" value="1">
                                <svg t="1625817180424" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                     xmlns="http://www.w3.org/2000/svg" p-id="9001" width="64" height="64"><path
                                        d="M683.058 364.695c11 0 22 1.016 32.943 1.976C686.564 230.064 538.896 128 370.681 128c-188.104 0.66-342.237 127.793-342.237 289.226 0 93.068 51.379 169.827 136.725 229.256L130.72 748.43l119.796-59.368c42.918 8.395 77.37 16.79 119.742 16.79 11 0 21.46-0.48 31.914-1.442a259.168 259.168 0 0 1-10.455-71.358c0.485-148.002 128.744-268.297 291.403-268.297l-0.06-0.06z m-184.113-91.992c25.99 0 42.913 16.79 42.913 42.575 0 25.188-16.923 42.579-42.913 42.579-25.45 0-51.38-16.85-51.38-42.58 0-25.784 25.93-42.574 51.38-42.574z m-239.544 85.154c-25.384 0-51.374-16.85-51.374-42.58 0-25.784 25.99-42.574 51.374-42.574 25.45 0 42.918 16.79 42.918 42.575 0 25.188-16.924 42.579-42.918 42.579z m736.155 271.655c0-135.647-136.725-246.527-290.983-246.527-162.655 0-290.918 110.88-290.918 246.527 0 136.128 128.263 246.587 290.918 246.587 33.972 0 68.423-8.395 102.818-16.85l93.809 50.973-25.93-84.677c68.907-51.93 120.286-119.815 120.286-196.033z m-385.275-42.58c-16.923 0-34.452-16.79-34.452-34.179 0-16.79 17.529-34.18 34.452-34.18 25.99 0 42.918 16.85 42.918 34.18 0 17.39-16.928 34.18-42.918 34.18z m188.165 0c-16.984 0-33.972-16.79-33.972-34.179 0-16.79 16.927-34.18 33.972-34.18 25.93 0 42.913 16.85 42.913 34.18 0 17.39-16.983 34.18-42.913 34.18z"
                                        fill="#09BB07" p-id="9002"></path></svg>
                                </label>
                                <label title="账户余额" class="radio-inline">
                                    <input type="radio" name="payType" value="3">
                               <svg t="1664258859967" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                    xmlns="http://www.w3.org/2000/svg" p-id="10733" width="64" height="64"><path
                                       d="M921.6 518.6624a77.824 77.824 0 0 0-6.4-0.2624h-153.6c-42.4128 0-76.8 34.3872-76.8 76.8s34.3872 76.8 76.8 76.8h153.6c2.1568 0 4.288-0.0896 6.4-0.2624V800c0 42.4128-34.3872 76.8-76.8 76.8H179.2c-42.4128 0-76.8-34.3872-76.8-76.8V390.4c0-42.4128 34.3872-76.8 76.8-76.8h665.6c42.4128 0 76.8 34.3872 76.8 76.8v128.2624zM861.5168 275.2H216.5248a76.9792 76.9792 0 0 1 25.9648-12.3776l500.3008-132.224c40.9344-10.816 83.008 13.1392 93.984 53.5168L861.5168 275.2zM761.6 544h134.4a25.6 25.6 0 0 1 25.6 25.6v51.2a25.6 25.6 0 0 1-25.6 25.6h-134.4a51.2 51.2 0 1 1 0-102.4z m6.4 83.2a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"
                                       fill="#59AAFF" p-id="10734"></path></svg>
                                </label>
                            </span>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- Script Start -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/popper.min.js"></script>
<script src="assets/js/datatables.min.js"></script>
<script src="assets/js/dataTables.responsive.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<!-- Custom Script -->
<script src="assets/js/custom.min.js"></script>
<script src="static/plugins/layer/layer.min.js"></script>
<script src="static/js/bootstrap-show-modal.min.js"></script>
<script src="static/js/dbg.min.js"></script>

<script>
    if ('null' != decodeURI(getUrlParam('token'))) {
        localStorage.setItem('token', decodeURI(getUrlParam('token')) || '');
        localStorage.setItem('userId', decodeURI(getUrlParam('userId')) || '');
        localStorage.setItem('phone', decodeURI(getUrlParam('userName')) || '');
        if ('null' != decodeURI(getUrlParam('headUrl'))) {
            localStorage.setItem('headUrl', decodeURI(getUrlParam('headUrl')) || '');
        }
        if ('null' != decodeURI(getUrlParam('mail'))) {
            localStorage.setItem('mail', decodeURI(getUrlParam('mail')) || false);
        }
    }

    var downloadTypes = [];//客户端枚举
    var mealList = []; // 套餐列表
    var engineList = []; // 机房列表
    var ymType = 'system'; // 域名类型

    // 头像
    if (null != localStorage.getItem('headUrl') && '' !== localStorage.getItem('headUrl')) {
        $('#headUrl').attr('src', localStorage.getItem('headUrl'));
    }
    // 邮箱
    if (null != localStorage.getItem('mail') && '' !== localStorage.getItem('mail')) {
        $('#mail').html(localStorage.getItem('mail'));
    }
    // 等级
    if (null != localStorage.getItem('consumptionPoints') && '' !== localStorage.getItem('consumptionPoints')) {
        var crown = parseInt(localStorage.getItem('consumptionPoints') / 1000);                         //  皇冠
        var sun = parseInt((localStorage.getItem('consumptionPoints') % 1000) / 300);                   //  太阳
        var moon = parseInt((localStorage.getItem('consumptionPoints') % 1000 % 300) / 100);            //  月亮
        var star = parseInt((localStorage.getItem('consumptionPoints') % 1000 % 300 % 100) / 30);       //  星星
        $('#vip').html('');
        let vip = '会员等级: ';
        for (var i = 0; i < crown; i++) {
            vip += '<svg t="1683614781534" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8228" width="16" height="16"><path d="M886.5 748c30.4-35.9 62.4-80.5 71.3-147.5 11.2-82.1-20.7-144.9-85.6-114-13.2 5.7-25.3 11.4-36.7 17.1-16.5-61.4-62.3-94.8-122.9-58.9-59.2 32.4-99.9 62.5-135.8 85.9-4.5-1.1-9.2-2.1-13.9-3-7.6-39.2-17.8-71.4-29.9-98.9 35.3-29.8 52.9-19.1 46.3 47.1 52.3-54.5 59.3-88.1 16.4-98.6-20.1 0.1-43 9.2-67.3 22.8 23.1-16 41.7-42.9 39.3-64.8-0.6-16.4-7.2-21.5-18.4-17.1-8.8 3.4-14.6-1.1-19.1-9.5 4.6-4.5 7.6-10.9 7.6-18.1 0-13.8-11.1-25-24.7-25-13.7 0-24.7 11.2-24.7 25 0 6.3 2.4 12 6.2 16.5-4.6 9.3-10.7 14.7-20 11.1-11.2-4.4-17.8 0.7-18.4 17.1-2.4 22 16.3 48.7 39.3 64.8-24.2-13.7-47.2-22.7-67.3-22.8-42.9 10.5-35.9 44.1 16.4 98.6-6.5-66.2 11.1-76.9 46.3-47.1-12 27.5-22.3 59.5-29.9 98.9-4.6 0.8-9.3 1.9-13.8 3-35.9-23.5-76.6-53.5-135.8-85.9-60.6-35.9-106.4-2.6-122.9 58.9-11.4-5.6-23.5-11.4-36.7-17.1-64.8-30.8-96.8 31.9-85.6 114 8.9 67.1 41 111.6 71.3 147.5 7.8 9.3 16.9 17.1 26.1 24.4h-0.1c-14.5 0-26.3 32.6-26.3 72.6 0 40.2 11.8 72.7 26.3 72.7h696.8c14.5 0 26.3-32.6 26.3-72.7 0-40.2-11.8-72.6-26.3-72.6 9.3-7.3 18.4-15.2 26.2-24.4zM702.8 480c47.3 0.2 48.2 37.9 46.9 89.2 1 21.3-4 46-11.8 70.5-35.3-49.1-85.6-86.3-144.1-104.5 44.5-23.1 88.2-53.9 109-55.2z m-189.3-16.7c9.9 0 17.9 8.1 17.9 18.1 0 10.1-8.1 18.2-17.9 18.2s-17.9-8.1-17.9-18.2c-0.1-10 8-18.1 17.9-18.1z m0 61.8c9.9 0 17.9 8.2 17.9 18.2 0 10.1-8.1 18.3-17.9 18.3s-17.9-8.2-17.9-18.3c-0.1-10 8-18.2 17.9-18.2z m0 61.9c9.9 0 17.9 8.2 17.9 18.3 0 10-8.1 18.2-17.9 18.2s-17.9-8.2-17.9-18.2c-0.1-10.1 8-18.3 17.9-18.3z m0 61.9c9.9 0 17.9 8.2 17.9 18.3 0 10-8.1 18.2-17.9 18.2s-17.9-8.2-17.9-18.2c-0.1-10.1 8-18.3 17.9-18.3z m0 61.9c9.9 0 17.9 8.2 17.9 18.2 0 10.1-8.1 18.3-17.9 18.3s-17.9-8.2-17.9-18.3c-0.1-10.1 8-18.2 17.9-18.2zM321.2 480c20.8 1.3 64.5 32.1 108.9 55.3-58.6 18.2-108.9 55.4-144.1 104.5-7.6-24.5-12.6-49.2-11.8-70.5-1.2-51.4-0.3-89 47-89.3zM220.8 768.4c0.7 4.2-71.7-94.7-80-163.8-8.4-46.5-13.1-80.9 23.8-87.2 4.9-0.5 11.9 1.4 20.2 4.4-1.5 9.5-2.6 19.3-2.9 29.6-2.3 73.3 29 126.7 59.8 170.4 0.8 1.1 1.7 2.1 2.5 3.2-4.5 15.2-7.6 31-9.6 47.3h-10.9c-1-1.2-1.8-2.4-2.9-3.9zM332.9 873h-69c-18.1 0-32.7-13.2-32.7-29.5s14.6-29.6 32.7-29.6h69c18.1 0 32.7 13.2 32.7 29.6-0.1 16.3-14.7 29.5-32.7 29.5z m145.5-14.2l-28.6 15-28.8-14.9-28.7-14.9 28.6-15 28.6-15 28.8 14.9 28.6 14.9-28.5 15z m124.4 0.1L574 873.8l-28.6-15-28.5-15 28.6-14.9 28.8-14.9 28.6 15 28.6 15-28.7 14.9zM760.2 873h-69c-18.1 0-32.7-13.2-32.7-29.5s14.6-29.6 32.7-29.6h69c18.1 0 32.7 13.2 32.7 29.6 0 16.3-14.7 29.5-32.7 29.5z m29.2-100.6c-1.9-16.2-5.1-32.1-9.6-47.3 0.8-1.1 1.7-2.1 2.5-3.2 30.9-43.7 62-97.1 59.8-170.4-0.2-10.3-1.3-20.2-2.9-29.6 8.2-2.9 15.3-4.8 20.2-4.4 36.8 6.3 32.2 40.8 23.8 87.2-8.3 69-80.8 167.9-80.1 163.8-1 1.3-1.9 2.6-2.9 3.9h-10.8zM514.1 156.3c13.7 0 24.7-11.3 24.7-25.1s-11.1-25-24.7-25c-13.7 0-24.7 11.2-24.7 25s11 25.1 24.7 25.1zM513.1 208.9c13.7 0 24.7-11.3 24.7-25.1s-11.1-25-24.7-25c-13.7 0-24.7 11.2-24.7 25s11.1 25.1 24.7 25.1zM460.5 208.9c13.7 0 24.7-11.3 24.7-25.1s-11.1-25-24.7-25c-13.7 0-24.7 11.2-24.7 25s11 25.1 24.7 25.1zM565.8 208.9c13.7 0 24.7-11.3 24.7-25.1s-11.1-25-24.7-25-24.7 11.2-24.7 25c0.1 13.8 11.1 25.1 24.7 25.1zM513.1 262.3c13.7 0 24.7-11.3 24.7-25.1s-11.1-25-24.7-25c-13.7 0-24.7 11.2-24.7 25s11.1 25.1 24.7 25.1z" p-id="8229" fill="#f4ea2a"></path></svg>';
        }
        for (var i = 0; i < sun; i++) {
            vip += '<svg t="1683614850374" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9591" width="16" height="16"><path d="M505.34 221.87c-9.91 0-17.93-8.04-17.93-17.95V96.25c0-9.91 8.02-17.94 17.93-17.94 9.93 0 17.95 8.03 17.95 17.94v107.67c0 9.91-8.02 17.95-17.95 17.95zM505.34 939.67s0.02 0 0 0c-9.88 0-17.93-8.03-17.93-17.94V814.06c0-9.91 8.04-17.95 17.95-17.95s17.93 8.04 17.93 17.95v107.67c0 9.91-8.02 17.94-17.95 17.94z" fill="#F6BB42" p-id="9592"></path><path d="M302.32 305.96c-7.02 7.01-18.37 7.01-25.37 0l-76.15-76.14c-6.99-7-6.99-18.36 0-25.37 7.02-7.02 18.37-7.02 25.39 0l76.13 76.13c7.02 7.01 7.02 18.38 0 25.38zM809.9 813.52c-7.02 7.02-18.38 7.02-25.39 0l-76.13-76.13c-7.02-7.01-7.02-18.38 0-25.38 7.02-7.01 18.37-7.01 25.39 0l76.13 76.14c6.99 7 6.99 18.36 0 25.37z" fill="#FFCE54" p-id="9593"></path><path d="M218.23 508.99c0 9.91-8.04 17.94-17.95 17.94H92.61c-9.91 0-17.93-8.03-17.95-17.94 0-9.91 8.04-17.94 17.95-17.94h107.67c9.91 0 17.95 8.02 17.95 17.94zM936.02 508.99c0 9.91-8.02 17.94-17.93 17.94H810.42c-9.91 0-17.95-8.03-17.95-17.94 0-9.91 8.04-17.94 17.95-17.94h107.67c9.91 0 17.93 8.02 17.93 17.94z" fill="#F6BB42" p-id="9594"></path><path d="M302.32 712.01c7.02 7 7.02 18.37 0 25.38l-76.13 76.13c-7.02 7.02-18.37 7.02-25.39 0-6.99-7.01-6.99-18.36 0-25.37l76.15-76.14c7-7.01 18.36-7.01 25.37 0zM809.9 204.44c0 0.01 0 0 0 0 6.99 7.02 6.99 18.38 0 25.38l-76.15 76.14c-6.99 7.01-18.35 7.01-25.37 0-7.02-7-7.02-18.37 0-25.38l76.13-76.14c7.01-7 18.37-7 25.39 0z" fill="#FFCE54" p-id="9595"></path><path d="M505.34 742.27c-128.62 0-233.27-104.65-233.27-233.28S376.72 275.7 505.34 275.7c128.65 0 233.29 104.65 233.29 233.28S633.98 742.27 505.34 742.27z" fill="#FFCE54" p-id="9596"></path><path d="M505.34 257.75c-138.74 0-251.22 112.48-251.22 251.24S366.6 760.22 505.34 760.22c138.77 0 251.25-112.48 251.25-251.23S644.1 257.75 505.34 257.75z m152.27 403.5c-40.66 40.68-94.74 63.08-152.28 63.08-57.52 0-111.59-22.4-152.25-63.08C312.42 620.59 290 566.5 290 508.99s22.42-111.6 63.09-152.26c40.66-40.68 94.74-63.08 152.25-63.08 57.54 0 111.61 22.4 152.28 63.08 40.67 40.66 63.06 94.75 63.06 152.26s-22.4 111.6-63.07 152.26z" fill="#F6BB42" p-id="9597"></path></svg>';
        }
        for (var i = 0; i < moon; i++) {
            vip += '<svg t="1683614896073" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12439" width="16" height="16"><path d="M565 200.4c25.6 44.6 40.4 96.2 40.4 151.3 0 167.9-136.1 304-304 304-22.9 0-45.2-2.6-66.7-7.4C284.5 760.7 397 839.2 527.8 839.2c177 0 320.5-143.5 320.5-320.5 0-164.4-123.8-299.8-283.3-318.3zM312.9 243.6h-39.2v-39.2c0-10.8-8.8-19.6-19.6-19.6s-19.6 8.8-19.6 19.6v39.2h-39.2c-10.8 0-19.6 8.8-19.6 19.6s8.8 19.6 19.6 19.6h39.2V322c0 10.8 8.8 19.6 19.6 19.6s19.6-8.8 19.6-19.6v-39.2h39.2c10.8 0 19.6-8.8 19.6-19.6s-8.8-19.6-19.6-19.6z" fill="#FFF0C2" p-id="12440"></path><path d="M306.9 245.6h-35.2v-35.2c0-9.7-7.9-17.6-17.6-17.6-9.7 0-17.6 7.9-17.6 17.6v35.2h-35.2c-9.7 0-17.6 7.9-17.6 17.6 0 9.7 7.9 17.6 17.6 17.6h35.2V316c0 9.7 7.9 17.6 17.6 17.6 9.7 0 17.6-7.9 17.6-17.6v-35.2h35.2c9.7 0 17.6-7.9 17.6-17.6 0-9.7-7.9-17.6-17.6-17.6z" fill="#FFC445" p-id="12441"></path><path d="M427.8 475.3h-27.5v-27.5c0-7.6-6.2-13.8-13.8-13.8-7.6 0-13.8 6.2-13.8 13.8v27.5h-27.5c-7.6 0-13.8 6.2-13.8 13.8 0 7.6 6.2 13.8 13.8 13.8h27.5v27.5c0 7.6 6.2 13.8 13.8 13.8 7.6 0 13.8-6.2 13.8-13.8v-27.5h27.5c7.6 0 13.8-6.2 13.8-13.8 0-7.6-6.2-13.8-13.8-13.8z" fill="#FFF0C2" p-id="12442"></path><path d="M423.6 476.7h-24.7V452c0-6.8-5.5-12.4-12.4-12.4-6.8 0-12.4 5.5-12.4 12.4v24.7h-24.7c-6.8 0-12.4 5.5-12.4 12.4 0 6.8 5.5 12.4 12.4 12.4h24.7v24.7c0 6.8 5.5 12.4 12.4 12.4 6.8 0 12.4-5.5 12.4-12.4v-24.7h24.7c6.8 0 12.4-5.5 12.4-12.4 0-6.8-5.5-12.4-12.4-12.4z" fill="#FFC445" p-id="12443"></path><path d="M563.4 223c23.8 41.4 37.5 89.4 37.5 140.6 0 156-126.5 282.5-282.5 282.5-21.3 0-42-2.4-62-6.9 46.3 104.5 150.8 177.4 272.4 177.4 164.5 0 297.9-133.4 297.9-297.9 0-152.7-115.1-278.6-263.3-295.7z" fill="#FFB948" p-id="12444"></path></svg>';
        }
        for (var i = 0; i < star; i++) {
            vip += '<svg t="1683614909533" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="13456" width="16" height="16"><path d="M313.991837 914.285714c-20.37551 0-40.228571-6.269388-56.946939-18.808163-30.302041-21.942857-44.930612-58.514286-38.661225-95.085714l24.032654-141.061225c3.134694-18.285714-3.134694-36.571429-16.195919-49.110204L123.297959 509.910204c-26.644898-26.122449-36.04898-64.261224-24.555102-99.787755 11.493878-35.526531 41.795918-61.126531 78.889796-66.35102l141.583674-20.375511c18.285714-2.612245 33.959184-14.106122 41.795918-30.30204l63.216326-128.522449C440.946939 130.612245 474.383673 109.714286 512 109.714286s71.053061 20.897959 87.24898 54.334694L662.987755 292.571429c8.359184 16.195918 24.032653 27.689796 41.795918 30.30204l141.583674 20.375511c37.093878 5.22449 67.395918 30.82449 78.889796 66.35102 11.493878 35.526531 2.089796 73.665306-24.555102 99.787755l-102.4 99.787755c-13.061224 12.538776-19.330612 31.346939-16.195919 49.110204l24.032654 141.061225c6.269388 37.093878-8.359184 73.142857-38.661225 95.085714-30.302041 21.942857-69.485714 24.555102-102.4 7.314286L538.122449 836.440816c-16.195918-8.359184-35.526531-8.359184-51.722449 0l-126.955102 66.87347c-14.628571 7.314286-30.302041 10.971429-45.453061 10.971428z m162.481632-96.653061z" fill="#F2CB51" p-id="13457"></path></svg>';
        }
        $('#vip').html('会员等级: ' == vip ? '' : vip);
    }

    getEngineList();

    var table;

    $(document).ready(function () {
        notice();

        // 下载选项
        $.ajax({
            type: "get",
            url: baseUrl + "/file/downTypes", //url
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            headers: {
                token: localStorage.getItem('token')
            },
            success: function (result) {
                downloadTypes = result || [];
            }
        });

        table = $('#example').DataTable({
            language: {  //将英文转换为中文
                "sProcessing": "数据加载中...",
                "sLengthMenu": "显示 _MENU_ 项结果",
                "sZeroRecords": "没有匹配结果",
                "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
                "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                "sInfoPostFix": "",
                "sSearch": "搜索:",
                "sUrl": "",
                "sEmptyTable": "数据为空",
                "sLoadingRecords": "载入中...",
                "sInfoThousands": ",",
                "oPaginate": {
                    "sFirst": "首页",
                    "sPrevious": "上页",
                    "sNext": "下页",
                    "sLast": "末页"
                },
                "oAria": {
                    "sSortAscending": ": 以升序排列此列",
                    "sSortDescending": ": 以降序排列此列"
                }
            },
            processing: false,      //
            searching: false,       //去掉search
            pageLength: 5,          //页大小
            bLengthChange: false,   //页大小调整
            lengthMenu: [[5, 10, 20, -1], [5, 10, 20, "ALL"]],
            bSort: false,           //排序
            paging: true,           //分页
            info: true,             //分页文字
            autoWidth: true,        //自动计算宽度
            deferRender: true,      //延迟渲染
            serverSide: true,       //开启服务器模式
            bAutoWidth: true,       //自动宽度

            // responsive: false,      //关闭响应拓展
            // scrollX: true,          //设置X轴滚动
            // scrollCollapse: true,   //滚动折叠
            // fixedColumns:   {       //固定列
            //     left: 0,
            //     right: 1
            // },

            ajax: {
                url: baseUrl + "/nps/myAssets",
                type: 'POST',
                // contentType: 'application/json;charset=utf-8',
                headers: {
                    token: localStorage.getItem('token')
                },
                data: {
                    // 'key': '123'
                },
                dataSrc: function (data) {
                    if (data.code == 500) {
                        parent.toLogin();
                    }
                    return data.data;
                }
            },
            fnRowCallback: function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                $('td:eq(0)', nRow).attr('style', 'text-align: right;');
            },
            columns: [
                {
                    data: "serverUrl",
                    sDefaultContent: "",
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        return '<svg t="1691058820930" class="icon" viewBox="0 0 1246 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3182" width="16" height="16"><path d="M622.319529 961.924733H32.697945a31.032715 31.032715 0 1 0 0 62.06543H622.319529a31.032715 31.032715 0 1 0 0-62.06543z" fill="#007bff" p-id="3183"></path><path d="M622.319529 641.134103H32.697945a31.032715 31.032715 0 1 0 0 62.06543H622.319529a31.032715 31.032715 0 1 0 0-62.06543z" fill="#007bff" p-id="3184"></path><path d="M622.319529 320.880061H32.697945a31.032715 31.032715 0 1 0 0 62.06543H622.319529a31.032715 31.032715 0 1 0 0-62.06543z" fill="#007bff" p-id="3185"></path><path d="M36.454066 62.06543h1179.153737a31.032715 31.032715 0 1 0 0-62.06543H36.454066a31.032715 31.032715 0 1 0 0 62.06543z" fill="#007bff" p-id="3186"></path><path d="M1224.908675 757.1267h-140.854542V279.294435a31.032715 31.032715 0 0 0-62.06543 0v477.832265H881.670749a17.349702 17.349702 0 0 0-14.309033 28.528634l171.261237 230.912018a17.886291 17.886291 0 0 0 29.154655 0l171.261236-230.912018a17.886291 17.886291 0 0 0-14.309032-28.528634z" fill="#007bff" p-id="3187"></path></svg>' +
                            '&nbsp;&nbsp;&nbsp;<a href="' + data + '" target="_blank">' + data + '</a><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' + (row.remarks || '');
                    }
                },
                {
                    data: null,
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        return (row.targetIpPort || '--') + '<br/><br/><br/>';
                    }
                },
                {
                    data: "partitionName",
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        return data + '<br/><br/>' + (1 == row.tunnelType ? '<label class="mb-0 badge badge-primary" title="" data-original-title="Pending">TCP</label>' : 3 == row.tunnelType ? '<label class="mb-0 badge badge-primary" title="" data-original-title="Pending">HTTP</label>' : '<label class="mb-0 badge badge-primary" title="" data-original-title="Pending">SOCKS5</label>');
                    }
                },
                {
                    data: "closingDate",
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        return formatterDate(new Date(data)) + '<br/><br/><br/>';
                    }
                },
                {
                    data: "packageFlow",
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        var remainingPercentage = (null == row.remainingPercentage || '' == row.remainingPercentage || row.remainingPercentage.indexOf('-') != -1) ? '0%' : row.remainingPercentage;
                        return '' + data + '<br/><br/>' + '                <div class="progress" style="height: 25px;width: 50px;">\n' +
                            '                  <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="70"\n' +
                            '                  aria-valuemin="0" aria-valuemax="100" style="width:' + remainingPercentage + ';color: #333;">' + row.remainingPercentage + '</div>\n' +
                            '                </div>';
                    }
                },
                {
                    data: "status",
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        return data ? '<img style="width: 60px;height: 30px;" src=\'static/image/on.png\'>' : '<img style="width: 60px;height: 30px;"  src=\'static/image/off.png\'>';
                    }
                },
                {
                    data: null,
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        return row.online ? "<div class='online-circle'><div>" : "<div class='under-circle'><div>";
                    }
                },
                {
                    data: null,
                    sClass: "text-center",
                    render: function (data, type, row, meta) {
                        return 'prefix:&nbsp;' + row.prefix + '<br/><br/>' + 'vkey:&nbsp;' + row.vkey;
                    }
                },
                {
                    data: "id",
                    defaultContent: "",
                    sClass: "relative",
                    sStyle: {overflow: "auto"},
                    render: function (data, type, row, meta) {
                        let btns = '<div class="justify-content-end align-items-center">\n' +
                            '    <div class="btn-group">\n' +
                            '        <button type="button"\n' +
                            '                class="btn btn-primary dropdown-toggle"\n' +
                            '                data-toggle="dropdown" aria-haspopup="true"\n' +
                            '                aria-expanded="false">\n' +
                            '            管理\n' +
                            '        </button>\n' +
                            '        <ul class="dropdown-menu download-dropdown-menu"\n' +
                            '            style="min-width:100%;text-align: center;">\n' +
                            '            <li onclick="editOrder(' + JSON.stringify(row).replace(/\"/g, "'") + ')"><a\n' +
                            '                    href="javascript:;">\n' +
                            '                <svg t="1682498121787" class="icon" viewBox="0 0 1024 1024" version="1.1"\n' +
                            '                     xmlns="http://www.w3.org/2000/svg" p-id="2795" id="mx_n_1682498121789" width="16" height="16">\n' +
                            '                    <path d="M908.785955 492.415966c-11.04966 0-20.008706 8.958022-20.008706 20.008706l0 338.328565c0 38.614459-31.416524 70.030983-70.030983 70.030983L202.707748 920.78422c-38.614459 0-70.030983-31.416524-70.030983-70.030983l0-676.303067c0-38.614459 31.416524-70.030983 70.030983-70.030983l362.378308 0c11.04966 0 20.008706-8.958022 20.008706-20.008706 0-11.050684-8.959046-20.008706-20.008706-20.008706L202.707748 64.401776c-60.681034 0-110.049418 49.367361-110.049418 110.049418l0 676.303067c0 60.681034 49.367361 110.049418 110.049418 110.049418l616.038518 0c60.681034 0 110.049418-49.367361 110.049418-110.049418L928.795685 512.425695C928.795685 501.373988 919.836639 492.415966 908.785955 492.415966z"\n' +
                            '                          fill="#004ee6" p-id="2796"></path>\n' +
                            '                    <path d="M942.576549 117.985158 907.20597 82.614579c-23.405059-23.405059-61.486376-23.400966-84.891436 0l-422.369633 422.36861c-1.295506 1.296529-2.407839 2.76395-3.304256 4.363378L269.318842 736.416166c-4.457522 7.951089-2.977821 17.909905 3.598968 24.221658 3.830235 3.675716 8.823969 5.572926 13.859659 5.572926 3.613294 0 7.247054-0.977257 10.488889-2.973728l219.285309-135.104047c1.327228-0.816598 2.552126-1.784646 3.654226-2.885723l422.369633-422.36861C965.979562 179.471534 965.979562 141.390217 942.576549 117.985158zM418.556794 552.080857l55.42124 55.279001-132.025942 81.343633L418.556794 552.080857zM914.279063 174.579107 505.926678 582.930469l-63.748906-63.586201L850.612021 110.912066c7.798617-7.800663 20.493753-7.804756 28.29544 0l35.371602 35.371602C922.081773 154.084331 922.081773 166.777421 914.279063 174.579107z"\n' +
                            '                          fill="#004ee6" p-id="2797"></path>\n' +
                            '                </svg>\n' +
                            '                &nbsp;编辑实例</a></li>\n' +
                            '            <li onclick="deleteOrder(' + row.id + ')"><a\n' +
                            '                    href="javascript:;">\n' +
                            '                <svg t="1682781955626" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5690" width="16" height="16"><path d="M202.666667 256h-42.666667a32 32 0 0 1 0-64h704a32 32 0 0 1 0 64H266.666667v565.333333a53.333333 53.333333 0 0 0 53.333333 53.333334h384a53.333333 53.333333 0 0 0 53.333333-53.333334V352a32 32 0 0 1 64 0v469.333333c0 64.8-52.533333 117.333333-117.333333 117.333334H320c-64.8 0-117.333333-52.533333-117.333333-117.333334V256z m224-106.666667a32 32 0 0 1 0-64h170.666666a32 32 0 0 1 0 64H426.666667z m-32 288a32 32 0 0 1 64 0v256a32 32 0 0 1-64 0V437.333333z m170.666666 0a32 32 0 0 1 64 0v256a32 32 0 0 1-64 0V437.333333z" fill="#0062cc" p-id="5691"></path></svg>\n' +
                            '                &nbsp;删除实例</a></li>\n';

                        if ('0' != row.vip) {
                            btns += '            <li onclick="renewOrder(' + JSON.stringify(row).replace(/\"/g, "'") + ')"><a\n' +
                                '                    href="javascript:;">\n' +
                                '                <svg t="1682533837457" class="icon" viewBox="0 0 1024 1024" version="1.1"\n' +
                                '                     xmlns="http://www.w3.org/2000/svg" p-id="3322" width="16" height="16">\n' +
                                '                    <path d="M973.55320889 220.72888889h-116.50844444v125.47072c0 17.92455111-13.44398222 35.84910222-26.88682667 35.84910222S803.27111111 368.60472889 803.27111111 346.19960889V220.72888889H686.76266667c-22.40512 0-40.32967111-13.44284445-40.32967112-26.88568889s17.92455111-26.88796445 40.32967112-26.88796445H803.27111111v-116.50844444c0-22.40512 13.44284445-35.84796445 26.88568889-35.84796444s26.88796445 17.92455111 26.88796445 35.84796444v120.99015111h116.50844444c22.40512 0 40.32967111 13.44284445 40.32967111 26.88568889S995.95832889 220.72888889 973.55320889 220.72888889M646.43299555 337.23733333L520.96227555 467.18862222h103.0656c17.92341333 0 35.84796445 13.44398222 35.84796445 35.84910223 0 17.92455111-13.44284445 35.84910222-35.84796445 35.84910222h-103.0656v67.21649778h103.0656c17.92341333 0 35.84796445 13.44284445 35.84796445 35.84796444 0 17.92455111-13.44284445 35.84910222-35.84796445 35.84910222h-103.0656v98.58389334c0 17.92455111-13.44284445 35.84910222-35.84910222 35.84910222s-35.84796445-13.44284445-35.84796444-35.84910222v-98.58389334h-98.58503111c-17.92341333 0-35.84796445-13.44284445-35.84796445-35.84910222 0-17.92341333 13.44284445-35.84796445 35.84796445-35.84796444h98.58503111V538.88568889h-98.58503111c-17.92341333 0-35.84796445-13.44398222-35.84796445-35.84910222 0-17.92455111 13.44284445-35.84910222 35.84796445-35.84910222h98.58503111v-4.4805689L328.27505778 337.23733333c-13.44284445-13.44284445-13.44284445-35.84910222 0-49.29194666 13.44284445-13.44284445 35.84910222-13.44284445 49.29194667 0l112.02787555 112.02673778 107.54616889-112.02673778c13.44284445-13.44284445 35.84796445-13.44284445 49.29194666 0 13.44284445 17.92455111 13.44284445 35.84910222 0 49.29194666"\n' +
                                '                          p-id="3323" fill="#0056ff"></path>\n' +
                                '                    <path d="M498.55715555 131.10613333h-13.44398222c-224.05461333 0-407.77955555 183.72608-407.77955555 407.77955556s183.72494222 407.77955555 407.77955555 407.77955556 407.77955555-183.72380445 407.77955556-407.77955556c0-17.92341333 13.44398222-31.36625778 35.84910222-31.36625778 17.92455111 0 31.36853333 13.44284445 31.36853334 31.36739556V512v22.40512c0 259.90371555-210.61290667 474.99605333-474.99719112 474.99605333-259.90257778 0-474.99605333-210.61063111-474.99605333-474.99605333 0-255.42200889 215.09233778-470.51434667 474.99605333-470.51434667h13.44398222c17.92341333 0 35.84796445 13.44284445 35.84796445 35.84910222-4.48056889 17.92341333-17.92455111 31.36739555-35.84796445 31.36739556"\n' +
                                '                          p-id="3324" fill="#0056ff"></path>\n' +
                                '                </svg>\n' +
                                '                &nbsp;续费实例</a></li>\n';
                        }

                        if ('3' == row.tunnelType || '4' == row.tunnelType) {
                            btns += '            <li onclick="safe(' + JSON.stringify(row).replace(/\"/g, "'") + ')"><a\n' +
                                '                    href="javascript:;">' +
                                '<svg t="1683334940775" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2792"\n' +
                                '     id="mx_n_1683334940777" width="16" height="16">\n' +
                                '    <path d="M788.081778 435.2c41.585778 0 75.292444 34.389333 75.292444 76.8v358.4c0 42.410667-33.706667 76.8-75.292444 76.8H235.918222c-41.585778 0-75.292444-34.389333-75.292444-76.8V512c0-42.410667 33.706667-76.8 75.292444-76.8h552.163556z m0-76.8H235.918222C152.746667 358.4 85.333333 427.178667 85.333333 512v358.4C85.333333 955.221333 152.746667 1024 235.918222 1024h552.163556C871.253333 1024 938.666667 955.221333 938.666667 870.4V512c0-84.821333-67.413333-153.6-150.584889-153.6zM512 76.8c97.024 0 175.672889 80.213333 175.672889 179.2v102.4H336.327111V256c0-98.986667 78.648889-179.2 175.672889-179.2zM512 0c-138.609778 0-250.993778 114.631111-250.993778 256v179.2h501.987556V256c0-141.368889-112.355556-256-250.993778-256z m0 806.4c-20.792889 0-37.660444-17.180444-37.660444-38.4v-153.6c0-21.219556 16.867556-38.4 37.660444-38.4 20.792889 0 37.660444 17.180444 37.660444 38.4V768c0 21.219556-16.867556 38.4-37.660444 38.4z"\n' +
                                '          fill="#007bff" p-id="2793"></path>\n' +
                                '</svg>' +
                                '                &nbsp;安全密码</a></li>\n';
                        }

                        if ('3' == row.tunnelType && '2' == row.tunnelTypeHttp && '0' != row.vip) {
                            btns += '            <li onclick="ssl(' + JSON.stringify(row).replace(/\"/g, "'") + ')"><a\n' +
                                '                    href="javascript:;">' +
                                '<svg t="1683335620611" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4917"\n' +
                                '     width="16" height="16">\n' +
                                '    <path d="M513 110.27c-228.83 0-415 180.77-415 402.96s186.17 402.95 415 402.95 415-180.76 415-402.95-186.17-402.96-415-402.96z m0 737.28c-190.99 0-346.36-149.98-346.36-334.33S322.02 178.9 513 178.9c190.98 0 346.36 149.98 346.36 334.33S703.99 847.55 513 847.55z"\n' +
                                '          fill="#007bff" p-id="4918"></path>\n' +
                                '    <path d="M325.29 501.41l-30.25-4.32c-10.44-1.44-18.72-5.4-23.76-10.09-5.4-5.04-7.56-11.88-7.56-18.36 0-17.64 12.96-32.4 39.61-32.4 16.92 0 36.37 2.16 52.57 17.64l31.69-31.33c-21.97-21.24-47.53-29.89-82.82-29.89-55.45 0-89.31 32.05-89.31 77.78 0 21.6 6.12 38.17 18.36 50.41 11.52 11.16 27.73 18 49.69 21.25l30.97 4.32c11.88 1.8 17.65 4.32 22.69 9 5.4 5.04 7.92 12.6 7.92 21.6 0 20.52-15.84 31.69-45.37 31.69-23.76 0-45.73-5.4-61.94-21.6l-32.41 32.41c25.21 25.57 54.74 33.85 93.63 33.85 53.65 0 95.06-28.09 95.06-77.78 0-22.68-6.12-41.41-19.81-54.37-10.79-10.09-25.55-16.57-48.96-19.81zM535.95 501.41l-30.25-4.32c-10.44-1.44-18.72-5.4-23.76-10.09-5.4-5.04-7.56-11.88-7.56-18.36 0-17.64 12.96-32.4 39.61-32.4 16.92 0 36.36 2.16 52.57 17.64l31.69-31.33c-21.96-21.24-47.53-29.89-82.81-29.89-55.45 0-89.31 32.05-89.31 77.78 0 21.6 6.12 38.17 18.36 50.41 11.52 11.16 27.73 18 49.69 21.25l30.96 4.32c11.88 1.8 17.65 4.32 22.69 9 5.4 5.04 7.92 12.6 7.92 21.6 0 20.52-15.84 31.69-45.37 31.69-23.76 0-45.73-5.4-61.94-21.6l-32.41 32.41c25.21 25.57 54.74 33.85 93.63 33.85 53.65 0 95.06-28.09 95.06-77.78 0-22.68-6.13-41.41-19.81-54.37-10.79-10.09-25.55-16.57-48.96-19.81zM701.95 606.55V394.82H651.9V651.2h166.37v-44.65z"\n' +
                                '          fill="#007bff" p-id="4919"></path>\n' +
                                '</svg>' +
                                '                &nbsp;上传证书</a></li>\n';
                        }

                        if ('2' == row.vip) {
                            btns += '            <li onclick="flowOrder(' + JSON.stringify(row).replace(/\"/g, "'") + ')"><a\n' +
                                '                    href="javascript:;">' +
                                '<svg t="1683335729883" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6085"\n' +
                                '     width="16" height="16">\n' +
                                '    <path d="M512 128l133.12 102.4 5.12 5.12 5.12 5.12c61.44 30.72 112.64 71.68 158.72 128 107.52 163.84 61.44 384-102.4 491.52-61.44 40.96-128 61.44-199.68 61.44-117.76 0-230.4-61.44-296.96-158.72-81.92-117.76-81.92-276.48 0-394.24 46.08-51.2 97.28-97.28 153.6-133.12l5.12-5.12 5.12-5.12L512 128M512 0L317.44 148.48C245.76 189.44 179.2 240.64 128 307.2c-102.4 153.6-102.4 358.4 0 512 87.04 133.12 235.52 204.8 384 204.8 87.04 0 179.2-25.6 256-76.8 209.92-143.36 266.24-430.08 128-640-51.2-66.56-117.76-117.76-189.44-158.72L512 0z"\n' +
                                '          fill="#007bff" p-id="6086"></path>\n' +
                                '    <path d="M512 716.8c-15.36 0-25.6-5.12-35.84-15.36L409.6 634.88l-66.56 66.56c-20.48 20.48-51.2 20.48-71.68 0s-20.48-51.2 0-71.68l102.4-102.4c20.48-20.48 51.2-20.48 71.68 0l66.56 66.56 168.96-168.96c20.48-20.48 51.2-20.48 71.68 0s20.48 51.2 0 71.68l-204.8 204.8c-10.24 10.24-20.48 15.36-35.84 15.36z"\n' +
                                '          fill="#007bff" p-id="6087"></path>\n' +
                                '</svg>' +
                                '                &nbsp;流量充值</a></li>\n';
                        }

                        btns += '        </ul>\n' +
                            '    </div>\n' +
                            '    &nbsp;\n' +
                            '    <div class="btn-group">\n' +
                            '        <button type="button"\n' +
                            '                class="btn btn-primary dropdown-toggle"\n' +
                            '                data-toggle="dropdown" aria-haspopup="true"\n' +
                            '                aria-expanded="false">\n' +
                            '            下载\n' +
                            '        </button>                    ' +
                            '        <ul class="dropdown-menu download-dropdown-menu" style="">' +
                            downloadTypes.map(type => `<li onclick="ondownload('${row.status}','${type}', ${row.partitionId}, ${row.clientId})"><a href="javascript:;">${type}</a></li>`).join('')
                            + '</ul>\n' +
                            '    </div>';
                        return btns;
                    }
                }
            ],
        });

    });

    function formatterDate(date) {
        var seperator = "-";
        var month = date.getMonth() + 1;
        var strDate = date.getDate();
        if (month >= 1 && month <= 9) {
            month = "0" + month;
        }
        if (strDate >= 0 && strDate <= 9) {
            strDate = "0" + strDate;
        }
        return date.getFullYear() + seperator + month + seperator + strDate;
    }


    function ondownload(status, type, partitionId, id) {
        if (status == 'false') {
            $.showAlert({title: "提示", body: '当前实例不是运行状态，续费后刷新即可下载！'});
            return;
        } else {
            if (type != 'Synology_群晖' && type != 'Android_安卓' && type != 'Socks5_windows' && type != 'Socks5_mac') {
                parent.openShandow();
                $.ajax({
                    url: baseUrl + `/file/down?partitionId=${partitionId}&clientId=${id}&typeEnum=${type}&token=${localStorage.getItem('token')}`,
                    type: "GET",
                    xhrFields: {responseType: "blob"},
                    success: function (response, status) {
                        const url = window.URL.createObjectURL(new Blob([response]));
                        var a = document.createElement("a");
                        a.download = type + '.zip';
                        a.href = url;
                        a.target = '_blank';
                        $("body").append(a);
                        a.click();
                        $(a).remove();
                        URL.revokeObjectURL(url);
                        parent.closeShandow();
                    },
                    error: function (xhr, status, error) {
                        $.showAlert({title: "提示", body: error})
                    }
                });
            } else {
                $.ajax({
                    type: "get",
                    url: baseUrl + `/file/down?partitionId=${partitionId}&clientId=${id}&typeEnum=${type}&token=${localStorage.getItem('token')}`, //url
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    success: function (result) {
                        if (result.msg.indexOf("http") != -1) {
                            var a = document.createElement("a");
                            a.href = result.msg;
                            a.target = '_blank';
                            $("body").append(a);
                            a.click();
                            $(a).remove();
                        } else {
                            $.showAlert({title: "提示", body: data.msg})
                        }
                    }
                });
            }

            /*            if (type != 'Synology_群晖' && type != 'Android_安卓' && type != 'Socks5_windows' && type != 'Socks5_mac') {
                            let a = document.createElement('a');
                            a.style.display = 'none';
                            a.href = baseUrl + `/file/down?partitionId=${partitionId}&clientId=${id}&typeEnum=${type}&token=${localStorage.getItem('token')}`;
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                        } else {
                            var xhr = new XMLHttpRequest()
                            xhr.open('GET', baseUrl + "/file/down?typeEnum=" + type + "&clientId=" + id + "&partitionId=" + partitionId + "&token=" + localStorage.getItem('token'), true);
                            xhr.responseType = 'blob';
                            xhr.setRequestHeader("token", localStorage.getItem('token')); // 请求头中的验证信息等（如果有）
                            xhr.onload = function (res) {
                                if (this.status === 200) {
                                    if (this.response.type.indexOf('application/json') != -1) {
                                        let reader = new FileReader();
                                        reader.addEventListener('loadend', function (e) {
                                            let data = JSON.parse(e.target.result);
                                            if (data.msg.indexOf("http") != -1) {
                                                var a = document.createElement("a");
                                                a.href = data.msg;
                                                a.target = '_blank';
                                                $("body").append(a);
                                                a.click();
                                                $(a).remove();
                                            } else {
                                                $.showAlert({title: "提示", body: data.msg})
                                            }
                                        });
                                        reader.readAsText(xhr.response);
                                    } else if (this.response.type.indexOf('application/octet-stream') != -1) {
                                        const url = window.URL.createObjectURL(new Blob([this.response]));
                                        var a = document.createElement("a");
                                        a.download = type + '.zip';
                                        a.href = url;
                                        a.target = '_blank';
                                        $("body").append(a);
                                        a.click();
                                        $(a).remove();
                                        URL.revokeObjectURL(url);
                                    }

                                }
                            }
                            xhr.send()
                        }*/
        }
    }

    // 新建实例
    function add() {
        let val = $('.form-select-create').children('option:selected').val();
        if (val == 4) {
            $('.port-input1').hide();
        } else {
            $('.port-input1').show();
        }
        if (val == 3) {
            $('.host-input1').show();
        } else {
            $('.host-input1').hide();
        }

        $("#targetEditHost").val(uuid(8, 16));

        layer.open({
            type: 1,
            skin: 'demo-class zindex100',
            title: ['创建实例', 'text-align:left;background:#11a1fd'],
            area: ['30%', '80%'],
            shadeClose: false,
            shade: 0,
            offset: ['0%', '30%'],
            // // maxmin: true, //允许全屏最小化
            content: $('#createOrderLayer'),
            btn: ["取消", "提交"],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                let val = $('#targetEditHost').val().trim();
                let reg = /^[a-z0-9.*]{1,13}$/
                if (val && !reg.test(val)) {
                    $.showAlert({title: "提示", options: {backdrop: false}, body: '域名前缀不能大写或包含特殊字符，且长度不超过13个字符'});
                    $('#targetEditHost').focus();
                    return;
                }

                let val1 = $('.form-select-create').children('option:selected').val();
                if (val1 != 4) {
                    let val2 = $('#targetIpPort').val().trim();
                    if (!val2) {
                        $.showAlert({title: "提示", options: {backdrop: false}, body: '内网服务栏端口号必填'});
                        $('#targetIpPort').focus();
                        return;
                    }
                }

                let val2 = $('#targetSelfEditHost').val().trim();
                let reg1 = /^[a-z0-9.-]{0,63}$/i;
                if (val2 && !reg1.test(val2)) {
                    $.showAlert({title: "提示", options: {backdrop: false}, body: '自定义域名不支持大写及特殊字符，且长度不超过64个字符'});
                    $('#targetSelfEditHost').focus();
                    return;
                }

                $.showConfirm({
                    title: "应用协议",
                    body: "● 已使用免费机房测试，能够熟练使用软件</br>" +
                        "● 承诺不会用于违法违规内容代理，严格遵守本站协议，任何违规行为与本站无关，属个人行为，个人承担相应法律责任",
                    textTrue: "同意",
                    textFalse: "拒绝",
                    onSubmit: function (result) { // callback on confirm
                        if (result) {
                            let val = decodeURIComponent($('#createOrderForm').serialize(), true)
                            let params = {}
                            let arr = val.split('&').forEach(item => {
                                let kv = item.split('=')
                                params[kv[0]] = kv[1]
                            })
                            if (params.partitionId == '5' && ((params.ymRadioOptions == 'system' && params.tunnelType == '3') || params.tunnelType != '3')) {
                                // 香港机房非自定义域名再次确认
                                $.showConfirm({
                                    title: "实例建议",
                                    body: "香港机房仅建议需要使用自己未备案域名的场景,否则建议选择延时性稳定性更优的大陆机房，当然您也可以继续操作",
                                    textTrue: "继续创建",
                                    textFalse: "更换机房",
                                    onSubmit: function (result) { // callback on confirm
                                        if (result) {
                                            createOrder(params, function () {
                                            })
                                        } else {
                                            return;
                                        }
                                    },
                                    onDispose: function () {
                                    }
                                })
                            } else {
                                createOrder(params, function () {
                                })
                            }
                        } else {
                            return;
                        }
                    },
                    onDispose: function () {
                    }
                });
            }
        });
    }

    function createOrder(params, fb) {
        $.ajax({
            type: "post",
            url: baseUrl + "/order/create", //url
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            headers: {
                token: localStorage.getItem('token')
            },
            data: JSON.stringify(params),
            success: function (result) {
                if (0 == result.code) {
                    if (result.msg != 'success') {
                        pay(result.msg);
                    } else {
                        searchPage();
                        $.showAlert({title: "提示", body: "操作成功"})
                    }
                } else {
                    searchPage();
                    $.showAlert({title: "提示", body: result.msg})
                }
            }
        });
    }

    // 获取优惠券、折扣券列表
    function getCouponList(isVip) {
        $.ajax({
            type: "get",
            url: baseUrl + "/lottery/coupons?isVip=" + isVip, //url
            dataType: "json",
            headers: {
                token: localStorage.getItem('token')
            },
            contentType: "application/json;charset=utf-8",
            success: function (result) {
                let wrap = $('.coupon-select')
                if (result.data.length > 0) {
                    let str = result.data.map(item => {
                        return `<option value=${item.id}>${item.prizeName} 中奖时间 ${item.createDate}</option>`
                    }).join('')
                    wrap.html(`<option value=""></option>` + str);
                    $("#coupon").attr("style", "display:block;");
                } else {
                    wrap.html('');
                    $("#coupon").attr("style", "display:none;");
                }
            }
        });
    }

    // 获取机房列表
    function getEngineList() {
        $.ajax({
            type: "get",
            url: baseUrl + "/nps/partition/list", //url
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            headers: {
                token: localStorage.getItem('token')
            },
            success: function (result) {
                let wrap = $('.form-engine-select')
                engineList = result.data;
                let stars = '☆☆☆☆☆'
                let starf = '★★★★★'
                let str = result.data.map(item => {
                    let bl = item.busyDegree >= 5 ? starf : starf.slice(0, item.busyDegree) + stars.slice(item.busyDegree)
                    return `<option value=${item.id}>${item.name}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;拥挤程度：${bl}</option>`
                }).join('');
                wrap.append(str);
                getMealListOnSelect();
            }
        });
    }

    // 机房下拉变更
    $('.form-engine-select').change(function () {
        getMealListOnSelect();
    });

    // 实例类型变更
    $('.form-select-create').change(function () {
        let val = $(this).children('option:selected').val();
        let ei = $('.form-engine-select').children('option:selected').val();
        let item = engineList.find(item => item.id == ei);
        getCouponList(item.vip);
        if (val == 4) {
            $('.port-input1').hide()
        } else {
            $('.port-input1').show()
        }
        if (val == 3) {
            $('.host-input1').show()
        } else {
            $('.host-input1').hide()
        }
    })

    function getMealListOnSelect() {
        let ei = $('.form-engine-select').children('option:selected').val();
        let item = engineList.find(item => item.id == ei);
        $('.address-info').html(item.httpHost.slice(1));
        getMealList(item.vip);
        getCouponList(item.vip);
        isFree(item.vip);
        isCustom(item.isCustom);
    }


    // 获取套餐列表
    function getMealList(isVip) {
        $.ajax({
            type: "get",
            url: baseUrl + "/order/selectMealList?isVip=" + isVip, //url
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            success: function (result) {
                let wrap = $('.meal-select')
                mealList = result.data;
                let str = result.data.map(item => {
                    item.remarks = item.remark ? item.remark.split('-') : []
                    return `<option value=${item.id}>${item.remarks.slice(1, 4).join("-")}</option>`
                }).join('')
                wrap.html(str)
            }
        });
    }

    // 获取流量套餐列表
    function getFlowMealList() {
        $.ajax({
            type: "get",
            url: baseUrl + "/order/selectFlowMealList",
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            success: function (result) {
                let wrap = $('.flow-meal-select')
                mealList = result.data;
                let str = result.data.map(item => {
                    return `<option value=${item.id}>${item.value + "¥ " + item.code + "G"}</option>`
                }).join('')
                wrap.html(str)
            }
        });
    }

    // 是否支持自定义域名(0:不支持 1:支持)
    function isCustom(isCustom) {
        if (isCustom) {
            $("#isCustom").attr("style", "visibility:show;");
        } else {
            $("#inlineRadio2").prop("checked", true);
            $('.ym-system-input').show();
            $('.ym-my-input').hide();
            ymType = 'system';
            $("#isCustom").attr("style", "visibility:hidden;");
        }
    }

    // 是否需要支付
    function isFree(vip) {
        if (vip) {
            $("#pay").attr("style", "display:block;");
        } else {
            $("#pay").attr("style", "display:none;");
        }
    }

    // 自定义域名切换
    $('input[type=radio][name=ymRadioOptions]').change(function () {
        if (this.value === 'system') {
            $('.ym-system-input').show()
            $('.ym-my-input').hide()
            ymType = 'system'
        } else {
            $('.ym-system-input').hide()
            $('.ym-my-input').show()
            ymType = 'myself'
        }
    });


    // 搜索
    function searchPage() {
        var param = {
            "key": $("#search").val(),
        };
        table.settings()[0].ajax.data = param;
        table.ajax.reload();
    }

    // 删除实例
    function deleteOrder(id) {
        $.showConfirm({
            title: "删除实例",
            body: "删除后实例不可以恢复,只能重新下单,确认删除吗？",
            textTrue: "确认",
            textFalse: "取消",
            onSubmit: function (result) { // callback on confirm
                if (result) {
                    $.ajax({
                        type: "post",
                        url: baseUrl + "/nps/myAssets/delete", //url
                        dataType: "json",
                        contentType: "application/json;charset=utf-8",
                        headers: {
                            token: localStorage.getItem('token')
                        },
                        data: JSON.stringify({id: id}),
                        success: function (result) {
                            if (result.code) {
                                $.showAlert({title: "提示", body: result.msg})
                            } else {
                                searchPage();
                                $.showAlert({title: "提示", body: "操作成功"})
                            }
                        }
                    });
                } else {
                    return;
                }
            },
            onDispose: function () {
            }
        });
    }

    // 编辑实例
    function editOrder(row) {
        $("#targetEditSysHost").val("");
        $("#targetEditSelfHost").val("");
        $('#targetEditIpPort').val(row.targetIpPort)
        $('#targetEditRemarks').val(row.remarks)
        // $('.form-select-create').val(tunnelType)
        if (row.tunnelType == 4) {
            $('.port-input').hide()
        } else {
            $('.port-input').show()
        }
        $('.edit-instance-select2').hide();

        if (row.tunnelType == 3) {
            $('#hostLabel').show();
            if (row.tunnelTypeHttp == 1) {
                $('.ym-edit-system-input').show();
                $('.ym-edit-my-input').hide();
                let arrs = row.serverUrl.replace("http://", "").split(".");
                let pre = '';
                for (var i = 0; i < arrs.length - 3; i++) {
                    pre += arrs[i] + ".";
                }
                $("#targetEditSysHost").val(pre.substring(0, pre.length - 1));
            } else {
                $('.ym-edit-system-input').hide();
                $('.ym-edit-my-input').show();
                $("#targetEditSelfHost").val(row.serverUrl.replace("http://", ""));
            }
        } else {
            $('#hostLabel').hide();
            $('.ym-edit-system-input').hide();
            $('.ym-edit-my-input').hide();
            $("#targetEditSysHost").val("");
            $("#targetEditSelfHost").val("");
        }

        $.ajax({
            type: "get",
            url: baseUrl + "/nps/myAssets/enableMerge?id=" + row.id, //url
            dataType: "json",
            headers: {
                token: localStorage.getItem('token')
            },
            contentType: "application/json;charset=utf-8",
            success: function (result) {
                if (0 == result.code) {
                    let wrap = $('.partitionMarge')
                    mealList = result.data;
                    let str = `<option value=''>当前实例 ${row.serverUrl} 客户端ID ${row.clientId}</option>`;
                    str += result.data.map(item => {
                        return `<option value=${item.id}>合并至实例 ${item.serverUrl} 客户端ID ${item.clientId}</option>`
                    }).join('');
                    wrap.html(str);
                    $('.edit-instance-select3').show();
                } else {
                    $.showAlert({title: "提示", body: result.msg});
                }
            }
        });

        layer.open({
            type: 1,
            skin: 'demo-class zindex100',
            title: ['编辑实例', 'text-align:left;background:#11a1fd'],
            area: ['30%', '80%'],
            shadeClose: false,
            shade: 0,
            offset: ['0%', '30%'],
            // // maxmin: true, //允许全屏最小化
            content: $('#editLayer'),
            btn: ["取消", "提交"],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                let val = decodeURIComponent($('#editForm').serialize(), true)
                let params = {}
                let arr = val.split('&').forEach(item => {
                    let kv = item.split('=')
                    params[kv[0]] = kv[1]
                })
                params.id = row.id;

                if (null != row.tunnelType && row.tunnelType != 4 && (null == params.targetIpPort || '' == params.targetIpPort)) {
                    $.showAlert({title: "提示", options: {backdrop: false}, body: '内网服务栏端口号必填'});
                    return false;
                }

                if (row.tunnelType == 3) {
                    if (row.tunnelTypeHttp == 1) {
                        let val1 = $('#targetEditSysHost').val().trim();
                        let reg = /^[a-z0-9.*]{1,13}$/
                        if (!val1 || !reg.test(val1)) {
                            $.showAlert({title: "提示", body: "域名前缀不能大写或包含特殊字符，且长度不超过13个字符"});
                            $('#targetEditSysHost').focus();
                            return false;
                        }
                    } else {
                        let val2 = $('#targetEditSelfHost').val().trim();
                        let reg1 = /^[a-z0-9.-]{0,63}$/i;
                        if (!val2 || !reg1.test(val2)) {
                            $.showAlert({title: "提示", body: "自定义域名不支持大写及特殊字符，且长度不超过64个字符"});
                            $('#targetEditSelfHost').focus();
                            return false;
                        }
                    }
                }

                $.ajax({
                    type: "post",
                    url: baseUrl + "/nps/myAssets/update", //url
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    headers: {
                        token: localStorage.getItem('token')
                    },
                    data: JSON.stringify(params),
                    success: function (result) {
                        if (0 == result.code) {
                            searchPage();
                            $.showAlert({title: "提示", body: '操作成功'});
                        } else {
                            $.showAlert({title: "提示", body: result.msg})
                        }
                    }
                });
            }
        });
    }

    // 续费实例
    function renewOrder(row) {
        getMealList(row.vip);
        $('.edit-instance-select1').hide()
        $('.port-input').hide()
        $('.host-input1').hide()
        $('.edit-engine-select1').hide()
        getCouponList(row.vip);
        isFree(row.vip);

        layer.open({
            type: 1,
            skin: 'demo-class zindex100',
            title: ['实例续费', 'text-align:left;background:#11a1fd'],
            area: ['30%', '50%'],
            shadeClose: false,
            shade: 0,
            offset: ['0%', '30%'],
            // // maxmin: true, //允许全屏最小化
            content: $('#createOrderLayer'),
            btn: ["取消", "提交"],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                let val = $('#targetEditHost').val().trim();
                let reg = /^[a-z0-9.*]{1,13}$/
                if (val && !reg.test(val)) {
                    $.showAlert({title: "提示", options: {backdrop: false}, body: '域名前缀不能大写或包含特殊字符，且长度不超过13个字符'});
                    $('#targetEditHost').focus();
                    return;
                }

                let val1 = $('.form-select-create').children('option:selected').val();
                if (val1 != 4) {
                    let val2 = $('#targetIpPort').val().trim();
                    if (!val2) {
                        $.showAlert({title: "提示", options: {backdrop: false}, body: '内网服务栏端口号必填'});
                        $('#targetIpPort').focus();
                        return;
                    }
                }

                let val2 = $('#targetSelfEditHost').val().trim();
                let reg1 = /^[a-z0-9.-]{0,63}$/i;
                if (val2 && !reg1.test(val2)) {
                    $.showAlert({title: "提示", options: {backdrop: false}, body: '自定义域名不支持大写及特殊字符，且长度不超过64个字符'});
                    $('#targetSelfEditHost').focus();
                    return;
                }

                $.showConfirm({
                    title: "应用协议",
                    body: "● 已使用免费机房测试，能够熟练使用软件</br>" +
                        "● 承诺不会用于违法违规内容代理，严格遵守本站协议，任何违规行为与本站无关，属个人行为，个人承担相应法律责任",
                    textTrue: "同意",
                    textFalse: "拒绝",
                    onSubmit: function (result) { // callback on confirm
                        if (result) {
                            let val = decodeURIComponent($('#createOrderForm').serialize(), true)
                            let params = {}
                            let arr = val.split('&').forEach(item => {
                                let kv = item.split('=')
                                params[kv[0]] = kv[1]
                            })
                            if (params.partitionId == '5' && ((params.ymRadioOptions == 'system' && params.tunnelType == '3') || params.tunnelType != '3')) {
                                // 香港机房非自定义域名再次确认
                                $.showConfirm({
                                    title: "实例建议",
                                    body: "香港机房仅建议需要使用自己未备案域名的场景,否则建议选择延时性稳定性更优的大陆机房，当然您也可以继续操作",
                                    textTrue: "继续创建",
                                    textFalse: "更换机房",
                                    onSubmit: function (result) { // callback on confirm
                                        if (result) {
                                            let item = mealList.find(item => item.id == params.mealId) || {};
                                            params.amount = item.value;
                                            params.payCycle = item.code;
                                            params.id = row.id;
                                            createOrder(params, function () {
                                            })
                                        } else {
                                            return;
                                        }
                                    },
                                    onDispose: function () {
                                    }
                                })
                            } else {
                                let item = mealList.find(item => item.id == params.mealId) || {};
                                params.amount = item.value;
                                params.payCycle = item.code;
                                params.id = row.id;
                                createOrder(params, function () {
                                })
                            }
                        } else {
                            return;
                        }
                    },
                    onDispose: function () {
                    }
                });
            }
        });
    }

    // 账户密码设置
    function safe(row) {
        document.getElementById('userName').value = row.userName || '';
        document.getElementById('passWord').value = row.passWord || '';
        layer.open({
            type: 1,
            skin: 'demo-class zindex100',
            title: ['安全密码', 'text-align:left;background:#11a1fd'],
            area: ['30%', '50%'],
            shadeClose: false,
            shade: 0,
            offset: ['5%', '30%'],
            // maxmin: true, //允许全屏最小化
            content: $('#passWordLayer'),
            btn: ["取消", "提交"],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                let val = decodeURIComponent($('#passWordForm').serialize(), true)
                let params = {}
                let arr = val.split('&').forEach(item => {
                    let kv = item.split('=')
                    params[kv[0]] = kv[1]
                });
                params['id'] = row.id;
                $.ajax({
                    type: "post",
                    url: baseUrl + "/safe/save", //url
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    headers: {
                        token: localStorage.getItem('token')
                    },
                    data: JSON.stringify(params),
                    success: function (result) {
                        if (0 == result.code) {
                            searchPage();
                            $.showAlert({title: "提示", body: '操作成功'});
                        } else {
                            $.showAlert({title: "提示", body: result.msg});
                        }
                    }
                });
            }
        });
    }

    // 域名证书上传
    function ssl(row) {
        document.getElementById('certificate').value = row.certificate || '';
        document.getElementById('key').value = row.privateKey || '';
        currentChangeOrderId = row.id;

        layer.open({
            type: 1,
            skin: 'demo-class zindex100',
            title: ['证书上传', 'text-align:left;background:#11a1fd'],
            area: ['45%', '88%'],
            shadeClose: false,
            shade: 0,
            offset: ['0%', '20%'],
            // maxmin: true, //允许全屏最小化
            content: $('#sslLayer'),
            btn: ["取消", "提交"],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                $.showConfirm({
                    title: "证书审核",
                    body: "证书上传后，平台会采取机器+人工审核机制，需要一定生效时间(通常情况下当天可生效),此期间HTTP请求不受影响，若长时间未生效，可联系管理员加急处理",
                    textTrue: "同意",
                    textFalse: "拒绝",
                    onSubmit: function (result) { // callback on confirm
                        if (result) {
                            let params = {}
                            params['certificate'] = encodeURIComponent(document.getElementById('certificate').value);
                            params['key'] = encodeURIComponent(document.getElementById('key').value);
                            params['id'] = row.id;

                            $.ajax({
                                type: "post",
                                url: baseUrl + "/ssl/apply", //url
                                dataType: "json",
                                contentType: "application/json;charset=utf-8",
                                headers: {
                                    token: localStorage.getItem('token')
                                },
                                data: JSON.stringify(params),
                                success: function (result) {
                                    if (0 == result.code) {
                                        searchPage();
                                        $.showAlert({title: "提示", body: '操作成功'});
                                    } else {
                                        $.showAlert({title: "提示", body: result.msg});
                                        return false;
                                    }
                                }
                            });

                        } else {
                            return;
                        }
                    },
                    onDispose: function () {
                    }
                })


            }
        });
    }

    // 流量充值
    function flowOrder(row) {
        currentChangeOrderId = row.id;
        getFlowMealList();
        layer.open({
            type: 1,
            skin: 'demo-class zindex100',
            title: ['流量充值', 'text-align:left;background:#11a1fd'],
            area: ['30%', '50%'],
            shadeClose: false,
            shade: 0,
            offset: ['5%', '30%'],
            // maxmin: true, //允许全屏最小化
            content: $('#flowLayer'),
            btn: ["取消", "提交"],
            yes: function (index) {
                layer.close(index);
            },
            btn2: function (index) {
                $.showConfirm({
                    title: "充值协议",
                    body: "● 流量充值不增加实例时间</br>" +
                        "● 开票需提前联系管理员确认",
                    textTrue: "同意",
                    textFalse: "拒绝",
                    onSubmit: function (result) { // callback on confirm
                        if (result) {
                            let val = decodeURIComponent($('#flowForm').serialize(), true)
                            let params = {}
                            let arr = val.split('&').forEach(item => {
                                let kv = item.split('=')
                                params[kv[0]] = kv[1]
                            });
                            params['lineId'] = row.id;

                            $.ajax({
                                type: "get",
                                url: baseUrl + "/order/flowRecharge?payType=" + params['payType'] + "&lineId=" + params['lineId'] + "&mealId=" + params['mealId'],
                                dataType: "json",
                                contentType: "application/json;charset=utf-8",
                                headers: {
                                    token: localStorage.getItem('token')
                                },
                                success: function (result) {
                                    if (result.code == 0) {
                                        if (undefined != result.orderUrl && result.orderUrl != '') {
                                            pay(result.orderUrl);
                                        }
                                    } else {
                                        $.showAlert({title: "提示", body: result.msg});
                                    }
                                }
                            });

                        } else {
                            return;
                        }
                    },
                    onDispose: function () {
                    }
                })
            }
        });
    }


    // 证书拖拽处理
    var certificate = document.getElementById('certificate');

    certificate.addEventListener("dragenter", function (e) {
        e.stopPropagation();
        e.preventDefault();
    }, false);

    certificate.addEventListener("dragover", function (e) {
        e.stopPropagation();
        e.preventDefault();
    }, false);

    function checkSsl() {
        let params = {}
        params.id = currentChangeOrderId;
        params.certificate = certificate.value;
        $.ajax({
            type: "post",
            url: baseUrl + "/ssl/check",
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            headers: {
                token: localStorage.getItem('token')
            },
            data: JSON.stringify(params),
            success: function (result) {
                if (0 == result.code) {

                } else {
                    $.showAlert({title: "提示", body: result.msg})
                }
            }
        });
    }

    certificate.addEventListener("drop", function (e) {
        e.stopPropagation();
        e.preventDefault();

        // 得到拖拽过来的文件
        var dataFile = e.dataTransfer.files[0];
        // FileReader实例化
        var fr = new FileReader();
        // 异步读取文件
        fr.readAsText(dataFile);
        // 读取完毕之后执行
        fr.onload = function () {
            // 获取得到的结果
            certificate.value = fr.result;
            checkSsl();
        };
    }, false);

    var key = document.getElementById('key');

    key.addEventListener("dragenter", function (e) {
        e.stopPropagation();
        e.preventDefault();
    }, false);

    key.addEventListener("dragover", function (e) {
        e.stopPropagation();
        e.preventDefault();
    }, false);

    key.addEventListener("drop", function (e) {
        e.stopPropagation();
        e.preventDefault();

        // 得到拖拽过来的文件
        var dataFile = e.dataTransfer.files[0];
        // FileReader实例化
        var fr = new FileReader();
        // 异步读取文件
        fr.readAsText(dataFile);
        // 读取完毕之后执行
        fr.onload = function () {
            // 获取得到的结果
            key.value = fr.result;
        };
    }, false);


    // 机房提示
    $('#partitionTips').hover(function () {
        let title = `<p>通常建议选择离自己最近的机房,线路延时会更低</p>
                    <p>建议选择需要实名的机房,用户质量更高,不易违规影响机房运行</p>
                    <p>香港机房延时会相对偏高,仅建议未阿里云平台备案域名使用</p>
                    <p>免费机房仅供体验,请选择不限流量和超高带宽机房,性能和带宽更加优异</p>`;
        layer.tips(title, this, {
            tips: [3, '#11a1fd'],       // 弹层位置 1-4上右下左， 背景颜色
            area: ['400px', 'auto'],
            time: 30000,
            anim: false,                // 禁用动画
        });
    }, function () {
        layer.closeAll('tips');
    });

    // 实例类型提示
    $('#tunnelTips').hover(function () {
        let title = `<p>⚠️&nbsp;&nbsp;请仔细选择实例类型,后期不支持修改</p>
                        </p><p><strong>域名</strong> 将内网服务以域名的形式暴露到公网(如127.0.0.1:8080 -> http://www.aeert.com),适用内网建站、微信回调、群晖NAS等</p>
                        <p><strong>TCP</strong> 将内网服务暴露到公网(如 127.0.0.1:8080 -> 121.41.19.238:1888),适用内网建站、群晖NAS、WSS(套餐需满1年)、远程桌面、远程SSH等</p>
                        <p><strong>SOCKS5</strong> 将当前网络和局域网网络打通,实现VPN功能,适用于远程办公,在家访问公司内网资源</p>`;
        layer.tips(title, this, {
            tips: [3, '#11a1fd'],       // 弹层位置 1-4上右下左， 背景颜色
            area: ['400px', 'auto'],
            time: 30000,
            anim: false,                // 禁用动画
        });
    }, function () {
        layer.closeAll('tips');
    });

    // 域名提示
    $('#hostTips').hover(function () {
        let title = `<p>系统赠送域名自带SSL,支持HTTPS;自定义域名实现HTTPS自行上传证书即可</p>
                    <p>系统赠送域名微信内访问可能会被拦截,有需要的话建议使用自定义域名或购买年费套餐使用高级域名</p>
                    <p>自定义域名非香港机房需要根据机房要求备案，如未备案请选择香港机房</p>
                    <p>使用自定义域名,需域名后台添加CNAME解析到对应机房域名,同时部分机房需联系管理员添加白名单,细节参考说明文档</p>`;
        layer.tips(title, this, {
            tips: [3, '#11a1fd'],       // 弹层位置 1-4上右下左， 背景颜色
            area: ['400px', 'auto'],
            time: 30000,
            anim: false,                // 禁用动画
        });
    }, function () {
        layer.closeAll('tips');
    });

    // 内网设置提示
    $('#targetIpPortTips').hover(function () {
        let title = `<p>本机可直接填写端口,例: 8080; 80端口也需要填写, 例：127.0.0.1:80</p><p>支持负载均衡，用逗号隔开即可，例: 127.0.0.1:8080,127.0.0.2:8081</p>`;
        layer.tips(title, this, {
            tips: [3, '#11a1fd'],       // 弹层位置 1-4上右下左， 背景颜色
            area: ['400px', 'auto'],
            time: 30000,
            anim: false,                // 禁用动画
        });
    }, function () {
        layer.closeAll('tips');
    });

    /**
     * @param len
     * @param radix
     * uuid(8, 2)  //  "01001010"
     * uuid(8, 10) // "47473046"
     * uuid(8, 16) // "098F4D35"
     * @returns {string}
     */
    function uuid(len, radix) {
        var chars = '0123456789abcdefghijklmnopqrstuvwxyz'.split('');
        var uuid = [], i;
        radix = radix || chars.length;

        if (len) {
            // Compact form
            for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];
        } else {
            // rfc4122, version 4 form
            var r;

            // rfc4122 requires these characters
            uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';
            uuid[14] = '4';

            // Fill in random data.  At i==19 set the high bits of clock sequence as
            // per rfc4122, sec. 4.1.5
            for (i = 0; i < 36; i++) {
                if (!uuid[i]) {
                    r = 0 | Math.random() * 16;
                    uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];
                }
            }
        }

        return uuid.join('');
    }

    function pay(url) {
        layer.open({
            type: 2,
            area: [`${$("body").width() > 1200 ? "700px" : "80vw"}`, "80vh"],
            offset: ['2%', '20%'],
            content: url,
            scrollbar: true,
            end: function () {
                searchPage();
            },
        });
    }

    function getUrlParam(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        var r = window.location.search.substr(1).match(reg);  //匹配目标参数
        if (r != null) return unescape(r[2]);
        return null; //返回参数值
    }

</script>
</body>